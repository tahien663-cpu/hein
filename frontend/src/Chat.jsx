function _0x5e73(){const _0x387591=['filter','alt','lastMessage','637198KXImOi','clipboard','<h3\x20class=\x22text-lg\x20font-semibold\x20mt-4\x20mb-2\x22>$1</h3>','DELETE','Cu·ªôc\x20tr√≤\x20chuy·ªán\x20m·ªõi','Italic\x20(Ctrl+I)','absolute\x20right-0\x20bottom-full\x20mb-2\x20w-48\x20','font-medium\x20truncate','Token\x20h·∫øt\x20h·∫°n,\x20vui\x20l√≤ng\x20ƒëƒÉng\x20nh·∫≠p\x20l·∫°i!','welcome','flex-1\x20overflow-y-auto\x20p-6\x20space-y-6','B·∫°n\x20c√≥\x20ch·∫Øc\x20mu·ªën\x20x√≥a\x20cu·ªôc\x20tr√≤\x20chuy·ªán\x20n√†y?','Prompt\x20qu√°\x20d√†i!\x20Vui\x20l√≤ng\x20s·ª≠\x20d·ª•ng\x20t·ªëi\x20ƒëa\x20500\x20k√Ω\x20t·ª±.','Enter','min-w-0\x20flex-1','classList','then','target','data-code','<a\x20href=\x22$2\x22\x20target=\x22_blank\x22\x20rel=\x22noopener\x20noreferrer\x22\x20class=\x22text-blue-500\x20hover:text-blue-600\x20underline\x22>$1</a>','flex\x20items-center\x20gap-2\x20px-3\x20py-1.5\x20rounded-lg\x20bg-green-500\x20hover:bg-green-600\x20text-white\x20transition-colors','bg-blue-600\x20text-white\x20hover:bg-blue-700','.\x20Th·ª≠\x20l·∫°i\x20sau\x20nh√©?\x20üòÖ','Delete\x20message\x20error:','selectionStart','flex\x20justify-between\x20items-center\x20mt-2\x20text-xs\x20text-gray-500','</code></pre><button\x20class=\x22copy-code-btn\x20absolute\x20top-2\x20right-2\x20px-2\x20py-1\x20rounded\x20bg-gray-200\x20dark:bg-gray-600\x20text-gray-700\x20dark:text-gray-300\x20hover:bg-gray-300\x20dark:hover:bg-gray-500\x20transition-colors\x20text-sm\x20font-medium\x22>Copy</button></div>','bg-gray-700\x20border-gray-600','Hein\x20AI','absolute\x20left-3\x20top-1/2\x20-translate-y-1/2\x20w-4\x20h-4\x20text-gray-500','error','height','signal','Nh·∫≠p\x20tin\x20nh·∫Øn\x20c·ªßa\x20b·∫°n...','Delete\x20chat\x20error:','Load\x20history\x20error:','w-full\x20p-4\x20pr-32\x20rounded-xl\x20border-2\x20resize-none\x20focus:outline-none\x20focus:ring-2\x20focus:border-transparent\x20transition-all\x20duration-200\x20','hover:bg-gray-200\x20text-gray-700','code','/api/chat','w-5\x20h-5\x20animate-spin','&amp;','X√≥a\x20tin\x20nh·∫Øn','149553fJEQmr','warn','bg-white\x20border-gray-200','style','Error\x20accessing\x20token:','bg-gray-50\x20border-gray-300\x20text-gray-900\x20placeholder-gray-500','w-full\x20flex\x20items-center\x20gap-3\x20px-4\x20py-2\x20text-left\x20','justify-start','replace','<h1\x20class=\x22text-2xl\x20font-bold\x20mt-4\x20mb-2\x22>$1</h1>','w-4\x20h-4\x20text-red-500','p-3\x20rounded-lg\x20cursor-pointer\x20relative\x20group\x20','min','w-5\x20h-5\x20text-blue-500','w-full\x20flex\x20items-center\x20gap-3\x20p-3\x20rounded-lg\x20transition-colors\x20','**√îi\x20z·ªùi,\x20l·ªói\x20r·ªìi!**\x20','text-xs\x20text-gray-500','bg-gray-800\x20text-white\x20shadow-sm\x20border\x20border-gray-700','input','H√¥m\x20qua','JSON\x20parse\x20error:','bg-gray-50\x20text-gray-900','opacity-0\x20group-hover:opacity-100\x20transition-opacity\x20p-1\x20rounded\x20hover:bg-red-500/20','p-4\x20border-b\x20','Copy\x20error:','&lt;','new-chat','Xin\x20ch√†o!\x20T√¥i\x20l√†\x20**Hein**!\x20üòÑ','chatId','flex\x20items-center\x20gap-2','toLocaleDateString','role','flex-1\x20min-w-0','flex-1\x20overflow-y-auto\x20p-4\x20space-y-2','\x20transition-colors','flex\x20justify-start','smooth','<div\x20class=\x22relative\x20my-2\x22><pre\x20class=\x22bg-gray-100\x20dark:bg-gray-800\x20p-4\x20rounded-lg\x20overflow-x-auto\x20shadow-sm\x22><code\x20class=\x22','Ti·∫øp\x20t·ª•c\x20cu·ªôc\x20tr√≤\x20chuy·ªán\x20n√†y\x20nh√©!\x20üòé','block','Error\x20saving\x20theme:','L·ªói\x20t·∫£i\x20·∫£nh.\x20üòî','1742748kXCbIN','flex\x20h-screen\x20','AbortError','includes','bg-gray-900\x20text-white','setSelectionRange','\x20border-r\x20flex\x20flex-col\x20overflow-hidden','dark','Code\x20(Ctrl+`)','absolute\x20top-2\x20right-2\x20opacity-0\x20group-hover:opacity-100\x20transition-opacity\x20p-1\x20rounded-full\x20hover:bg-red-500/20','w-0','catch','864172zomqoD','trim','API\x20Error:','div','toISOString','bg-gray-100\x20border-gray-300','user','sanitize','T√¨m\x20ki·∫øm\x20web','G·ª≠i\x20(Enter)','Error\x20formatting\x20time:','auto','bg-blue-100\x20text-blue-700','w-4\x20h-4','flex\x20items-center\x20gap-1','toString','bg-blue-500\x20text-white\x20hover:bg-blue-600','w-10\x20h-10\x20rounded-full\x20flex\x20items-center\x20justify-center\x20text-sm\x20font-medium\x20','C√°\x20nh√¢n','/home','L·ªói\x20x√≥a\x20chat','w-5\x20h-5','token','span','toggle','text-sm\x20text-gray-500','bg-blue-600\x20hover:bg-blue-700','copy-code-btn','T·∫°o\x20l·∫°i','hover:bg-gray-100\x20text-gray-900','\x20text-white\x20shadow-md\x20','findIndex','messageId','slice','\x20language-','D·ª´ng','<strong\x20class=\x22font-bold\x22>$1</strong>','removeEventListener','HTTP\x20','text-xs\x20opacity-70\x20mt-2','pre','toLowerCase','border-gray-700\x20bg-gray-800','selectionEnd','6jdtCDl','bg-white\x20text-gray-900\x20shadow-sm\x20border\x20border-gray-200','B·∫°n','key','documentElement','440YzwnXQ','loading','border-gray-700','flex\x20items-center\x20gap-2\x20flex-shrink-0','bg-blue-500\x20text-white','vi-VN','forEach','focus','text-sm','\x20for\x20','scrollIntoView','removeItem','writeText','pow','find','previousSibling','theme','4200392vNjSYq','substring','value','...','POST','<li\x20class=\x22ml-4\x22>‚Ä¢\x20$1</li>','2-digit','hover:bg-gray-600\x20text-white','map','L·ªói\x20x√≥a\x20chat,\x20th·ª≠\x20l·∫°i\x20nh√©!','bg-white\x20text-gray-900\x20border\x20border-gray-200','hover:bg-gray-200','bg-gray-800\x20text-white\x20border\x20border-gray-700','B·∫°n\x20c√≥\x20ch·∫Øc\x20mu·ªën\x20x√≥a\x20tin\x20nh·∫Øn\x20n√†y?','flex-1\x20flex\x20flex-col','p-4\x20rounded-2xl\x20','absolute\x20right-3\x20top-3\x20flex\x20gap-2','now','border-gray-200','V·ª´a\x20xong','addEventListener','<h2\x20class=\x22text-xl\x20font-semibold\x20mt-4\x20mb-2\x22>$1</h2>','Trang\x20ch·ªß','img','absolute\x20inset-0\x20flex\x20items-center\x20justify-center\x20bg-gray-200\x20dark:bg-gray-700\x20rounded-lg','2725068vGXMqU','length','p-2\x20rounded-lg\x20transition-colors\x20','<li\x20class=\x22ml-4\x20list-decimal\x22>$1</li>','textContent','flex\x20items-center\x20justify-between','bg-blue-900\x20text-blue-200','contains','history','toUpperCase','w-5\x20h-5\x20mt-1\x20flex-shrink-0','flex\x20items-center\x20gap-2\x20px-3\x20py-1.5\x20rounded-lg\x20bg-red-500\x20hover:bg-red-600\x20text-white\x20transition-colors','w-3.5\x20h-3.5','join','content','toLocaleTimeString','startsWith','deleted','click','p-2\x20rounded-lg\x20transition-all\x20duration-200\x20','L·ªói\x20t·∫£i\x20l·ªãch\x20s·ª≠\x20chat','application/json','p-6\x20border-t\x20','bg-gray-800\x20border-gray-700\x20text-white','JSON\x20parse\x20error\x20in\x20fetchChatHistory:','Y√™u\x20c·∫ßu\x20b·ªã\x20h·ªßy.\x20üòä','getItem','string','/login','p-2\x20rounded\x20transition-colors\x20','flex\x20items-start\x20gap-3','light','/api/message/','match','text-lg\x20font-semibold','hover:bg-gray-700','flex\x20items-center\x20gap-3','timestamp','text-red-500\x20text-sm','Bearer\x20','bg-blue-100\x20text-blue-900','opacity-50\x20cursor-not-allowed','bg-blue-500\x20hover:bg-blue-600','p-1.5\x20rounded-lg\x20','text-sm\x20text-gray-500\x20truncate','API\x20error:','4BPYiJd','3828790mZsnPH','message','T√¨m\x20ki·∫øm...','p-4\x20border-t\x20','<em\x20class=\x22italic\x22>$1</em>','bg-white\x20border-gray-200\x20text-gray-900','Enter\x20ƒë·ªÉ\x20g·ª≠i,\x20Shift+Enter\x20ƒë·ªÉ\x20xu·ªëng\x20d√≤ng','justify-end','title','w-full\x20flex\x20items-center\x20gap-3\x20p-3\x20rounded-lg\x20transition-colors\x20mb-3\x20','button','textarea','L·ªói\x20truy\x20c·∫≠p\x20token,\x20vui\x20l√≤ng\x20ƒëƒÉng\x20nh·∫≠p\x20l·∫°i!','hover:bg-gray-100','shiftKey','Token\x20h·∫øt\x20h·∫°n,\x20ƒëƒÉng\x20nh·∫≠p\x20l·∫°i\x20nh√©!','current','name','Cu·ªôc\x20tr√≤\x20chuy·ªán','messages','hover:bg-gray-600\x20text-gray-300','class','N·ªôi\x20dung\x20qu√°\x20l·ªõn.\x20H√£y\x20th·ª≠\x20v·ªõi\x20tin\x20nh·∫Øn\x20ng·∫Øn\x20h∆°n.','Search\x20the\x20web:\x20','relative','isActive','preventDefault','none','ctrlKey','opacity-50\x20cursor-not-allowed\x20scale-95','log','status','scrollHeight','max-w-full\x20rounded-lg\x20shadow-lg','new-chat-','<code\x20class=\x22bg-gray-100\x20dark:bg-gray-800\x20px-1\x20py-0.5\x20rounded\x20text-sm\x22>$1</code>','ƒêang\x20x·ª≠\x20l√Ω...','random','json','p-4'];_0x5e73=function(){return _0x387591;};return _0x5e73();}(function(_0x310deb,_0x1e970d){const _0x5e6969=_0x6cfe,_0x1d07ed=_0x310deb();while(!![]){try{const _0x334272=parseInt(_0x5e6969(0x1d4))/0x1+-parseInt(_0x5e6969(0x173))/0x2*(parseInt(_0x5e6969(0x200))/0x3)+parseInt(_0x5e6969(0x147))/0x4*(-parseInt(_0x5e6969(0x148))/0x5)+-parseInt(_0x5e6969(0x119))/0x6+parseInt(_0x5e6969(0x1c8))/0x7+parseInt(_0x5e6969(0x100))/0x8+-parseInt(_0x5e6969(0x19e))/0x9*(-parseInt(_0x5e6969(0xef))/0xa);if(_0x334272===_0x1e970d)break;else _0x1d07ed['push'](_0x1d07ed['shift']());}catch(_0x3e85bf){_0x1d07ed['push'](_0x1d07ed['shift']());}}}(_0x5e73,0x7d0c7));import{useState,useEffect,useRef,useCallback,useMemo}from'react';import{useNavigate}from'react-router-dom';import{Send,Bot,User,Loader2,Menu,Plus,MessageSquare,Search,Settings,Moon,Sun,Trash2,Home,Bold,Italic,Code,Globe,StopCircle,RefreshCw,Image,ChevronDown}from'lucide-react';import _0x258fac from'dompurify';import{jsx as _0x2f49a0,jsxs as _0x8f5d73}from'react/jsx-runtime';function _0x6cfe(_0x5c2bdf,_0x27c5fd){const _0x5e7347=_0x5e73();return _0x6cfe=function(_0x6cfe7d,_0x473225){_0x6cfe7d=_0x6cfe7d-0xeb;let _0x354845=_0x5e7347[_0x6cfe7d];return _0x354845;},_0x6cfe(_0x5c2bdf,_0x27c5fd);}const ImageMessage=({src:_0x46ac7e,alt:_0x15464a,onLoad:_0x1c3b62,onError:_0x44a7af})=>{const _0x572bfb=_0x6cfe,[_0x2f4be7,_0x4b9bf6]=useState(!![]),[_0x2f92e4,_0x371718]=useState(![]);return _0x8f5d73(_0x572bfb(0x1d7),{'className':_0x572bfb(0x160),'children':[_0x2f4be7&&_0x2f49a0(_0x572bfb(0x1d7),{'className':_0x572bfb(0x118),'children':_0x2f49a0(Loader2,{'className':'w-6\x20h-6\x20animate-spin\x20text-gray-500'})}),_0x2f49a0(_0x572bfb(0x117),{'src':_0x46ac7e,'alt':_0x15464a,'className':_0x572bfb(0x169),'onLoad':()=>{_0x4b9bf6(![]);if(_0x1c3b62)_0x1c3b62();},'onError':()=>{_0x4b9bf6(![]),_0x371718(!![]);if(_0x44a7af)_0x44a7af();},'style':{'display':_0x2f4be7||_0x2f92e4?_0x572bfb(0x163):_0x572bfb(0x1c5)}}),_0x2f92e4&&_0x2f49a0('p',{'className':_0x572bfb(0x13f),'children':_0x572bfb(0x1c7)})]});};export default function Chat(){const _0x12b806=_0x6cfe,_0x43e908=useNavigate(),[_0x205236,_0x476d2f]=useState([{'id':'welcome','role':'ai','content':_0x12b806(0x1b9),'timestamp':new Date()[_0x12b806(0x1d8)]()}]),[_0x3d95fc,_0x1dc9df]=useState(''),[_0x598bbd,_0x31ecf6]=useState(![]),[_0x12a498,_0x5cbd70]=useState(()=>localStorage[_0x12b806(0x133)](_0x12b806(0xff))||'dark'),[_0x1a8a0f,_0x33dbb0]=useState(!![]),[_0x13c1ff,_0x55a94d]=useState(null),[_0x4241a3,_0x2ebc4c]=useState(''),[_0x2554e1,_0x5e0ee4]=useState(()=>localStorage['getItem']('userName')||_0x12b806(0xec)),[_0x12f063,_0x539f5a]=useState([]),[_0x58521b,_0x34b7f3]=useState(![]),_0x5d6ca2=useRef(null),_0xbf2eec=useRef(null),_0xe17a41=useRef(null),_0xa16db7=useRef(null),_0x16641b=useRef(null);useEffect(()=>{const _0x1c605d=_0x12b806,_0x30bc4b=_0x56afec=>{const _0x3aaa13=_0x6cfe;_0xa16db7[_0x3aaa13(0x158)]&&!_0xa16db7['current']['contains'](_0x56afec[_0x3aaa13(0x184)])&&_0x34b7f3(![]);};return document[_0x1c605d(0x114)]('mousedown',_0x30bc4b),()=>document['removeEventListener']('mousedown',_0x30bc4b);},[]),useEffect(()=>{const _0x373f39=_0x12b806,_0x23baa6=_0x759362=>{const _0x1ac735=_0x6cfe;if(_0x759362[_0x1ac735(0x184)][_0x1ac735(0x182)][_0x1ac735(0x120)](_0x1ac735(0x1ef))){const _0x4fbc99=_0x759362['target'][_0x1ac735(0xfe)]['querySelector']('code');_0x4fbc99&&navigator[_0x1ac735(0x174)][_0x1ac735(0xfb)](_0x4fbc99[_0x1ac735(0x11d)])[_0x1ac735(0x183)](()=>{const _0x4988a9=_0x1ac735,_0x510fa3=_0x759362[_0x4988a9(0x184)][_0x4988a9(0x11d)];_0x759362['target'][_0x4988a9(0x11d)]='Copied!',setTimeout(()=>{const _0x3d96db=_0x4988a9;_0x759362[_0x3d96db(0x184)][_0x3d96db(0x11d)]=_0x510fa3;},0x7d0);})[_0x1ac735(0x1d3)](_0x62afc9=>{const _0xf0e559=_0x1ac735;console[_0xf0e559(0x191)](_0xf0e559(0x1b6),_0x62afc9);});}},_0xedcacd=_0x16641b['current'];return _0xedcacd&&_0xedcacd[_0x373f39(0x114)](_0x373f39(0x12b),_0x23baa6),()=>{const _0x1fa720=_0x373f39;_0xedcacd&&_0xedcacd[_0x1fa720(0x1f9)]('click',_0x23baa6);};},[]);const _0x5e58b4=useCallback(async(_0x4ce6e1,_0x25284b,_0xfddbfe=0x3,_0x706f73=0x3e8)=>{const _0x4a141f=_0x12b806;for(let _0x2bf74f=0x1;_0x2bf74f<=_0xfddbfe;_0x2bf74f++){try{_0xe17a41['current']=new AbortController(),_0x25284b[_0x4a141f(0x193)]=_0xe17a41['current'][_0x4a141f(0x193)];const _0x42989b=await fetch(_0x4ce6e1,_0x25284b);if(!_0x42989b['ok']){const _0x30d6e2=await _0x42989b['json']()['catch'](()=>({}));throw new Error(_0x30d6e2[_0x4a141f(0x191)]||'HTTP\x20'+_0x42989b['status']);}return _0x42989b;}catch(_0x496569){if(_0x496569[_0x4a141f(0x159)]===_0x4a141f(0x1ca))return console[_0x4a141f(0x166)]('Y√™u\x20c·∫ßu\x20b·ªã\x20h·ªßy'),null;if(_0x2bf74f===_0xfddbfe)throw _0x496569;console[_0x4a141f(0x19f)]('Retry\x20'+_0x2bf74f+'/'+_0xfddbfe+_0x4a141f(0xf8)+_0x4ce6e1+':\x20'+_0x496569[_0x4a141f(0x149)]),await new Promise(_0x4fb967=>setTimeout(_0x4fb967,_0x706f73*Math[_0x4a141f(0xfc)](0x2,_0x2bf74f-0x1)));}}},[]),_0x40cd9a=useCallback(_0xeadb31=>{const _0x2638be=_0x12b806;if(!_0xeadb31||typeof _0xeadb31!==_0x2638be(0x134))return'';try{let _0x1c2681=_0xeadb31[_0x2638be(0x1a6)](/&/g,_0x2638be(0x19c))[_0x2638be(0x1a6)](/</g,_0x2638be(0x1b7))['replace'](/>/g,'&gt;')['replace'](/```(\w+)?\n?([\s\S]*?)```/g,(_0x28f596,_0xcee207,_0x1b0e17)=>{const _0x1426ef=_0x2638be,_0x53ffd6=_0xcee207?_0x1426ef(0x1f6)+_0xcee207:'';return _0x1426ef(0x1c3)+_0x53ffd6+'\x22>'+_0x1b0e17+_0x1426ef(0x18d);})[_0x2638be(0x1a6)](/`([^`]+)`/g,_0x2638be(0x16b))['replace'](/\*\*(.*?)\*\*/g,_0x2638be(0x1f8))[_0x2638be(0x1a6)](/__(.*?)__/g,_0x2638be(0x1f8))['replace'](/(?<!\*)\*([^\*]+)\*(?!\*)/g,'<em\x20class=\x22italic\x22>$1</em>')['replace'](/(?<!_)_([^_]+)_(?!_)/g,_0x2638be(0x14c))[_0x2638be(0x1a6)](/~~(.*?)~~/g,'<del\x20class=\x22line-through\x20opacity-70\x22>$1</del>')[_0x2638be(0x1a6)](/\n/g,'<br>')[_0x2638be(0x1a6)](/\[([^\]]+)\]\(([^)]+)\)/g,_0x2638be(0x186))['replace'](/^### (.*$)/gim,_0x2638be(0x175))[_0x2638be(0x1a6)](/^## (.*$)/gim,_0x2638be(0x115))[_0x2638be(0x1a6)](/^# (.*$)/gim,_0x2638be(0x1a7))[_0x2638be(0x1a6)](/^\* (.*)$/gim,_0x2638be(0x105))[_0x2638be(0x1a6)](/^- (.*)$/gim,_0x2638be(0x105))[_0x2638be(0x1a6)](/^\d+\. (.*)$/gim,_0x2638be(0x11c))['replace'](/^> (.*)$/gim,'<blockquote\x20class=\x22border-l-4\x20border-gray-300\x20dark:border-gray-600\x20pl-4\x20italic\x20my-2\x22>$1</blockquote>');return _0x1c2681;}catch(_0xfc5ec7){return console[_0x2638be(0x191)]('Markdown\x20parse\x20error:',_0xfc5ec7[_0x2638be(0x149)]),_0xeadb31;}},[]),_0x242601=useCallback((_0x158dc2,_0x3f90cb)=>{const _0x57ed85=_0x12b806;if(!_0x158dc2)return'';if(_0x3f90cb==='ai'&&_0x158dc2[_0x57ed85(0x1cb)]('<img')){const _0x103add=_0x158dc2[_0x57ed85(0x13a)](/<img\s+src="([^"]+)"\s+alt="([^"]+)"\s*\/?>/i);if(_0x103add)return _0x2f49a0(ImageMessage,{'src':_0x103add[0x1],'alt':_0x103add[0x2]});}return _0x40cd9a(_0x158dc2);},[_0x40cd9a]),_0x3ffcd7=useCallback((_0x80c993,_0x25ceae='')=>{const _0x4a278f=_0x12b806,_0x3abef9=_0xbf2eec[_0x4a278f(0x158)];if(!_0x3abef9)return;const _0x28bd5b=_0x3abef9[_0x4a278f(0x18b)],_0x43fe00=_0x3abef9[_0x4a278f(0x1ff)],_0xea43d0=_0x3abef9[_0x4a278f(0x102)],_0x53d61c=_0xea43d0[_0x4a278f(0x101)](_0x28bd5b,_0x43fe00),_0x29af55=_0xea43d0[_0x4a278f(0x101)](0x0,_0x28bd5b)+_0x80c993+_0x53d61c+_0x25ceae+_0xea43d0['substring'](_0x43fe00);_0x1dc9df(_0x29af55),setTimeout(()=>{const _0x5dc6bd=_0x4a278f,_0x376ca3=_0x28bd5b+_0x80c993[_0x5dc6bd(0x11a)]+_0x53d61c[_0x5dc6bd(0x11a)];_0x3abef9[_0x5dc6bd(0xf6)](),_0x3abef9[_0x5dc6bd(0x1cd)](_0x376ca3,_0x376ca3);},0x0);},[]),_0x807452=useCallback(()=>_0x3ffcd7('**','**'),[_0x3ffcd7]),_0x23b4a5=useCallback(()=>_0x3ffcd7('*','*'),[_0x3ffcd7]),_0x419fa5=useCallback(()=>_0x3ffcd7('`','`'),[_0x3ffcd7]),_0x5712cd=useMemo(()=>{const _0xed75f=_0x12b806;return(_0x2554e1||'U')['split']('\x20')[_0xed75f(0x170)](Boolean)[_0xed75f(0x108)](_0x1b617a=>_0x1b617a[0x0])[_0xed75f(0x1f5)](0x0,0x2)[_0xed75f(0x126)]('')[_0xed75f(0x122)]();},[_0x2554e1]),_0x3cebd8=useCallback(()=>{const _0x28026d=_0x12b806;return'msg_'+Date[_0x28026d(0x111)]()+'_'+Math[_0x28026d(0x16d)]()[_0x28026d(0x1e3)](0x24)['substr'](0x2,0x9);},[]),_0xc34923=useCallback(_0x313f5b=>{const _0x405216=_0x12b806;try{const _0x1e2620=new Date(),_0x25eb1d=new Date(_0x313f5b);if(isNaN(_0x25eb1d['getTime']()))return _0x405216(0x113);const _0x2c09e2=(_0x1e2620-_0x25eb1d)/(0x3e8*0x3c*0x3c);if(_0x2c09e2<0x18)return _0x25eb1d[_0x405216(0x128)](_0x405216(0xf4),{'hour':_0x405216(0x106),'minute':'2-digit'});else return _0x2c09e2<0x30?_0x405216(0x1b1):_0x25eb1d[_0x405216(0x1bc)](_0x405216(0xf4),{'day':_0x405216(0x106),'month':_0x405216(0x106)});}catch(_0x211d59){return console[_0x405216(0x191)](_0x405216(0x1de),_0x211d59),_0x405216(0x113);}},[]);useEffect(()=>{const _0x4bacd5=_0x12b806;_0x5d6ca2['current']&&_0x5d6ca2['current'][_0x4bacd5(0xf9)]({'behavior':_0x4bacd5(0x1c2)});},[_0x205236]),useEffect(()=>{const _0xcee41b=_0x12b806;try{localStorage['setItem']('theme',_0x12a498),document[_0xcee41b(0xee)][_0xcee41b(0x182)][_0xcee41b(0x1ec)]('dark',_0x12a498===_0xcee41b(0x1cf));}catch(_0x4d6460){console[_0xcee41b(0x191)](_0xcee41b(0x1c6),_0x4d6460);}},[_0x12a498]),useEffect(()=>{const _0x826b5e=async()=>{const _0x3994e=_0x6cfe;let _0xf846eb;try{_0xf846eb=localStorage[_0x3994e(0x133)]('token');}catch(_0x454514){console['error'](_0x3994e(0x1a2),_0x454514),_0x43e908(_0x3994e(0x135));return;}if(!_0xf846eb){_0x43e908('/login');return;}try{const _0x41158e=await _0x5e58b4('/api/chat/history',{'headers':{'Authorization':_0x3994e(0x140)+_0xf846eb}});if(!_0x41158e)return;let _0x6e64b1;try{_0x6e64b1=await _0x41158e[_0x3994e(0x16e)]();}catch(_0x5698fc){console[_0x3994e(0x191)](_0x3994e(0x131),_0x5698fc);return;}if(_0x41158e[_0x3994e(0x167)]===0x193||_0x41158e[_0x3994e(0x167)]===0x191){alert('Token\x20h·∫øt\x20h·∫°n,\x20ƒëƒÉng\x20nh·∫≠p\x20l·∫°i\x20nh√©!'),localStorage[_0x3994e(0xfa)]('token'),_0x43e908(_0x3994e(0x135));return;}if(!_0x41158e['ok']){console[_0x3994e(0x191)]('Fetch\x20history\x20error:',_0x6e64b1);throw new Error(_0x6e64b1[_0x3994e(0x191)]||_0x3994e(0x12d));}_0x539f5a((_0x6e64b1[_0x3994e(0x121)]||[])[_0x3994e(0x108)](_0x356ff0=>({..._0x356ff0,'isActive':![]})));}catch(_0x419e97){console[_0x3994e(0x191)](_0x3994e(0x196),_0x419e97[_0x3994e(0x149)]);}};_0x826b5e();},[_0x43e908,_0x5e58b4]),useEffect(()=>{const _0x4ef9e2=_0x12b806;if(_0x13c1ff&&_0x12f063[_0x4ef9e2(0x11a)]>0x0){const _0x4418bd=_0x12f063[_0x4ef9e2(0xfd)](_0x4c5974=>_0x4c5974['id']===_0x13c1ff);_0x4418bd&&_0x4418bd[_0x4ef9e2(0x15b)]&&_0x4418bd[_0x4ef9e2(0x15b)]['length']>0x0?_0x476d2f(_0x4418bd[_0x4ef9e2(0x15b)]):_0x476d2f([{'id':'welcome-'+_0x13c1ff,'role':'ai','content':_0x4ef9e2(0x1c4),'timestamp':new Date()[_0x4ef9e2(0x1d8)]()}]);}},[_0x13c1ff,_0x12f063]);const _0x927afa=useCallback(async(_0x21024d,_0x4b1457,_0x11c128='')=>{const _0x9ab90d=_0x12b806;let _0x504460;try{_0x504460=localStorage[_0x9ab90d(0x133)](_0x9ab90d(0x1ea));}catch(_0x14928f){console[_0x9ab90d(0x191)](_0x9ab90d(0x1a2),_0x14928f),alert(_0x9ab90d(0x154)),_0x43e908('/login');return;}if(!_0x504460){alert(_0x9ab90d(0x17b)),_0x43e908(_0x9ab90d(0x135));return;}const _0x2131d2=_0x11c128?{'id':_0x3cebd8(),'role':_0x9ab90d(0x1da),'content':_0x11c128,'timestamp':new Date()['toISOString']()}:null;_0x2131d2&&_0x476d2f(_0x2743e5=>[..._0x2743e5,_0x2131d2]);_0x1dc9df(''),_0x31ecf6(!![]),_0x34b7f3(![]);try{const _0x5d7a05=_0x2131d2?[..._0x205236,_0x2131d2][_0x9ab90d(0x1f5)](-0x14):[..._0x205236][_0x9ab90d(0x1f5)](-0x14),_0x3ecb64={'messages':_0x5d7a05,'chatId':_0x13c1ff,..._0x4b1457},_0x1d5b5a=await _0x5e58b4(_0x21024d,{'method':_0x9ab90d(0x104),'headers':{'Content-Type':_0x9ab90d(0x12e),'Authorization':_0x9ab90d(0x140)+_0x504460},'body':JSON['stringify'](_0x3ecb64)});if(!_0x1d5b5a){_0x476d2f(_0xddcd17=>[..._0xddcd17,{'id':_0x3cebd8(),'role':'ai','content':_0x9ab90d(0x132),'timestamp':new Date()[_0x9ab90d(0x1d8)]()}]);return;}let _0xa5cb5e;try{_0xa5cb5e=await _0x1d5b5a[_0x9ab90d(0x16e)]();}catch(_0x42e56f){console[_0x9ab90d(0x191)](_0x9ab90d(0x1b2),_0x42e56f);throw new Error('Ph·∫£n\x20h·ªìi\x20t·ª´\x20server\x20kh√¥ng\x20h·ª£p\x20l·ªá.\x20Vui\x20l√≤ng\x20th·ª≠\x20l·∫°i.');}if(_0x1d5b5a[_0x9ab90d(0x167)]===0x19d)throw new Error(_0x9ab90d(0x15e));if(_0x1d5b5a['status']===0x193||_0x1d5b5a[_0x9ab90d(0x167)]===0x191){alert(_0x9ab90d(0x157)),localStorage[_0x9ab90d(0xfa)](_0x9ab90d(0x1ea)),_0x43e908(_0x9ab90d(0x135));return;}if(!_0x1d5b5a['ok']){console[_0x9ab90d(0x191)](_0x9ab90d(0x146),_0xa5cb5e);throw new Error(_0xa5cb5e[_0x9ab90d(0x191)]||_0x9ab90d(0x1fa)+_0x1d5b5a[_0x9ab90d(0x167)]);}const _0x4e6cda={'id':_0xa5cb5e[_0x9ab90d(0x1f4)]||_0x3cebd8(),'role':'ai','content':_0xa5cb5e[_0x9ab90d(0x149)],'timestamp':_0xa5cb5e['timestamp']||new Date()['toISOString']()};_0x476d2f(_0x3e6bdd=>[..._0x3e6bdd,_0x4e6cda]),_0x55a94d(_0xa5cb5e[_0x9ab90d(0x1ba)]),_0x539f5a(_0xd414c7=>{const _0x4679b8=_0x9ab90d,_0x440242=_0xd414c7[_0x4679b8(0x1f3)](_0xc19ea0=>_0xc19ea0['id']===_0xa5cb5e[_0x4679b8(0x1ba)]),_0x328528=_0x2131d2?[..._0x205236,_0x2131d2,_0x4e6cda]:[..._0x205236,_0x4e6cda],_0x39f7a6=_0x2131d2?_0x2131d2['content'][_0x4679b8(0x1f5)](0x0,0x32)+(_0x2131d2[_0x4679b8(0x127)][_0x4679b8(0x11a)]>0x32?'...':''):_0x4679b8(0x15a);if(_0x440242!==-0x1){const _0x3e97ba=[..._0xd414c7];return _0x3e97ba[_0x440242]={..._0x3e97ba[_0x440242],'lastMessage':_0xa5cb5e[_0x4679b8(0x149)][_0x4679b8(0x1f5)](0x0,0x32)+(_0xa5cb5e[_0x4679b8(0x149)][_0x4679b8(0x11a)]>0x32?'...':''),'timestamp':_0xa5cb5e['timestamp']||new Date()[_0x4679b8(0x1d8)](),'messages':_0x328528,'isActive':!![]},_0x3e97ba[_0x4679b8(0xf5)]((_0x6cb4f0,_0x11a19b)=>{const _0x2caf2e=_0x4679b8;if(_0x11a19b!==_0x440242)_0x6cb4f0[_0x2caf2e(0x161)]=![];}),_0x3e97ba;}else{const _0x2a8594={'id':_0xa5cb5e[_0x4679b8(0x1ba)],'title':_0x39f7a6,'lastMessage':_0xa5cb5e[_0x4679b8(0x149)][_0x4679b8(0x1f5)](0x0,0x32)+(_0xa5cb5e[_0x4679b8(0x149)][_0x4679b8(0x11a)]>0x32?_0x4679b8(0x103):''),'timestamp':_0xa5cb5e[_0x4679b8(0x13e)]||new Date()['toISOString'](),'isActive':!![],'messages':_0x328528};return[_0x2a8594,..._0xd414c7['map'](_0x9b0557=>({..._0x9b0557,'isActive':![]}))];}});}catch(_0x34fb1f){console[_0x9ab90d(0x191)](_0x9ab90d(0x1d6),_0x34fb1f['message']),_0x476d2f(_0x4abee3=>[..._0x4abee3,{'id':_0x3cebd8(),'role':'ai','content':_0x9ab90d(0x1ad)+_0x34fb1f[_0x9ab90d(0x149)]+_0x9ab90d(0x189),'timestamp':new Date()[_0x9ab90d(0x1d8)]()}]);}finally{_0x31ecf6(![]),_0xe17a41[_0x9ab90d(0x158)]=null;}},[_0x205236,_0x13c1ff,_0x3cebd8,_0x43e908,_0x5e58b4]),_0x8b2dec=useCallback(async(_0x9ba59d=![])=>{const _0x24aab8=_0x12b806;var _0x3baf75;const _0x226999=_0x9ba59d?(_0x3baf75=_0x205236[_0x205236['length']-0x1])===null||_0x3baf75===void 0x0?void 0x0:_0x3baf75['content']:_0x3d95fc[_0x24aab8(0x1d5)]();if(!_0x226999||_0x598bbd)return;_0x9ba59d?(_0x31ecf6(!![]),await _0x927afa(_0x24aab8(0x19a),{})):await _0x927afa(_0x24aab8(0x19a),{},_0x226999);},[_0x3d95fc,_0x598bbd,_0x205236,_0x927afa]),_0x3004d=useCallback(async()=>{const _0x296dbc=_0x12b806,_0x1a0a01=_0x3d95fc['trim']();if(!_0x1a0a01||_0x598bbd)return;const _0x373d12=_0x1a0a01['startsWith'](_0x296dbc(0x15f))?_0x1a0a01:'Search\x20the\x20web:\x20'+_0x1a0a01;await _0x927afa(_0x296dbc(0x19a),{},_0x373d12);},[_0x3d95fc,_0x598bbd,_0x927afa]),_0x5eb933=useCallback(async()=>{const _0x4899cf=_0x12b806,_0x31ca07=_0x3d95fc[_0x4899cf(0x1d5)]();if(!_0x31ca07||_0x598bbd)return;if(_0x31ca07[_0x4899cf(0x11a)]>0x1f4){alert(_0x4899cf(0x17f));return;}await _0x927afa('/api/generate-image',{'prompt':_0x31ca07},_0x31ca07);},[_0x3d95fc,_0x598bbd,_0x927afa]),_0x318310=useCallback(()=>{const _0x238431=_0x12b806;_0xe17a41[_0x238431(0x158)]&&(_0xe17a41['current']['abort'](),_0x31ecf6(![]),_0x476d2f(_0x53e8f2=>[..._0x53e8f2,{'id':_0x3cebd8(),'role':'ai','content':'ƒê√£\x20d·ª´ng\x20y√™u\x20c·∫ßu.\x20üòä','timestamp':new Date()[_0x238431(0x1d8)]()}]));},[_0x3cebd8]),_0x14e480=useCallback(()=>{const _0x4850bb=_0x12b806;_0x205236[_0x4850bb(0x11a)]>0x0&&!_0x598bbd&&_0x8b2dec(!![]);},[_0x205236,_0x598bbd,_0x8b2dec]),_0x5e2b57=useCallback(()=>{const _0x5ce654=_0x12b806;let _0x4d8a47;try{_0x4d8a47=localStorage[_0x5ce654(0x133)](_0x5ce654(0x1ea));}catch(_0x44018a){console[_0x5ce654(0x191)]('Error\x20accessing\x20token:',_0x44018a),_0x43e908('/login');return;}if(!_0x4d8a47){_0x43e908(_0x5ce654(0x135));return;}_0x55a94d(null),_0x476d2f([{'id':_0x5ce654(0x16a)+Date[_0x5ce654(0x111)](),'role':'ai','content':'**Cu·ªôc\x20tr√≤\x20chuy·ªán\x20m·ªõi!**\x20H·ªèi\x20g√¨\x20ƒëi\x20n√†o?\x20üòÑ','timestamp':new Date()['toISOString']()}]),_0x539f5a(_0x510758=>_0x510758[_0x5ce654(0x108)](_0x45c6b3=>({..._0x45c6b3,'isActive':![]})));},[_0x43e908]),_0x5704cc=useCallback(_0x29256f=>{const _0x4150c9=_0x12b806;_0x539f5a(_0x48fc83=>_0x48fc83[_0x4150c9(0x108)](_0x47be7b=>({..._0x47be7b,'isActive':_0x47be7b['id']===_0x29256f}))),_0x55a94d(_0x29256f);},[]),_0x3e3933=useCallback(async _0x22c2d2=>{const _0x883551=_0x12b806;if(!confirm(_0x883551(0x17e)))return;let _0x59ed72;try{_0x59ed72=localStorage['getItem'](_0x883551(0x1ea));}catch(_0x568e71){console[_0x883551(0x191)](_0x883551(0x1a2),_0x568e71),_0x43e908(_0x883551(0x135));return;}if(!_0x59ed72){_0x43e908('/login');return;}try{const _0x376030=await _0x5e58b4('/api/chat/'+_0x22c2d2,{'method':_0x883551(0x176),'headers':{'Authorization':'Bearer\x20'+_0x59ed72}});if(!_0x376030)return;if(_0x376030[_0x883551(0x167)]===0x193||_0x376030['status']===0x191){alert(_0x883551(0x157)),localStorage[_0x883551(0xfa)]('token'),_0x43e908(_0x883551(0x135));return;}if(!_0x376030['ok']){const _0x356105=await _0x376030['json']()[_0x883551(0x1d3)](()=>({}));console[_0x883551(0x191)](_0x883551(0x195),_0x356105);throw new Error(_0x356105[_0x883551(0x191)]||_0x883551(0x1e8));}_0x539f5a(_0x2032c0=>_0x2032c0[_0x883551(0x170)](_0x48979c=>_0x48979c['id']!==_0x22c2d2)),_0x22c2d2===_0x13c1ff&&(_0x55a94d(null),_0x476d2f([{'id':'deleted-'+Date['now'](),'role':'ai','content':'**Chat\x20ƒë√£\x20x√≥a!**\x20T·∫°o\x20cu·ªôc\x20tr√≤\x20chuy·ªán\x20m·ªõi\x20nh√©?\x20üòÑ','timestamp':new Date()[_0x883551(0x1d8)]()}]));}catch(_0x142cd2){console[_0x883551(0x191)](_0x883551(0x195),_0x142cd2['message']),alert(_0x883551(0x109));}},[_0x13c1ff,_0x43e908,_0x5e58b4]),_0x590b82=useCallback(async _0xff5cda=>{const _0x292ff7=_0x12b806;if(_0xff5cda['startsWith'](_0x292ff7(0x17c))||_0xff5cda['startsWith'](_0x292ff7(0x1b8))||_0xff5cda[_0x292ff7(0x129)](_0x292ff7(0x12a)))return;if(!confirm(_0x292ff7(0x10d)))return;let _0x25e8db;try{_0x25e8db=localStorage[_0x292ff7(0x133)](_0x292ff7(0x1ea));}catch(_0x36fd47){console[_0x292ff7(0x191)]('Error\x20accessing\x20token:',_0x36fd47),_0x43e908(_0x292ff7(0x135));return;}if(!_0x25e8db){_0x43e908(_0x292ff7(0x135));return;}try{const _0x19caca=await _0x5e58b4(_0x292ff7(0x139)+_0xff5cda,{'method':_0x292ff7(0x176),'headers':{'Authorization':'Bearer\x20'+_0x25e8db}});if(!_0x19caca)return;if(_0x19caca[_0x292ff7(0x167)]===0x193||_0x19caca[_0x292ff7(0x167)]===0x191){alert(_0x292ff7(0x157)),localStorage[_0x292ff7(0xfa)](_0x292ff7(0x1ea)),_0x43e908(_0x292ff7(0x135));return;}if(!_0x19caca['ok']){const _0x4363b7=await _0x19caca[_0x292ff7(0x16e)]()['catch'](()=>({}));console[_0x292ff7(0x191)](_0x292ff7(0x18a),_0x4363b7);throw new Error(_0x4363b7[_0x292ff7(0x191)]||'L·ªói\x20x√≥a\x20tin\x20nh·∫Øn');}_0x476d2f(_0x3d6710=>_0x3d6710[_0x292ff7(0x170)](_0x20073b=>_0x20073b['id']!==_0xff5cda));}catch(_0x160555){console[_0x292ff7(0x191)](_0x292ff7(0x18a),_0x160555[_0x292ff7(0x149)]),alert('L·ªói\x20x√≥a\x20tin\x20nh·∫Øn,\x20th·ª≠\x20l·∫°i\x20nh√©!');}},[_0x43e908,_0x5e58b4]),_0x10ab68=useMemo(()=>{const _0x59341e=_0x12b806;return _0x12f063['filter'](_0x336249=>_0x336249['title']&&_0x336249['title']['toLowerCase']()[_0x59341e(0x1cb)](_0x4241a3[_0x59341e(0x1fd)]())||_0x336249['lastMessage']&&_0x336249[_0x59341e(0x172)][_0x59341e(0x1fd)]()['includes'](_0x4241a3[_0x59341e(0x1fd)]()));},[_0x12f063,_0x4241a3]),_0x4406f3=useCallback(_0x3f22b4=>{const _0x57ce90=_0x12b806;_0x3f22b4[_0x57ce90(0xed)]===_0x57ce90(0x180)&&!_0x3f22b4[_0x57ce90(0x156)]&&!_0x598bbd&&(_0x3f22b4[_0x57ce90(0x162)](),_0x8b2dec());if((_0x3f22b4[_0x57ce90(0x164)]||_0x3f22b4['metaKey'])&&!_0x3f22b4[_0x57ce90(0x156)])switch(_0x3f22b4[_0x57ce90(0xed)]){case'b':_0x3f22b4['preventDefault'](),_0x807452();break;case'i':_0x3f22b4[_0x57ce90(0x162)](),_0x23b4a5();break;case'`':_0x3f22b4[_0x57ce90(0x162)](),_0x419fa5();break;default:break;}},[_0x8b2dec,_0x598bbd,_0x807452,_0x23b4a5,_0x419fa5]),_0x3e5166=useCallback(()=>_0x43e908(_0x12b806(0x1e7)),[_0x43e908]),_0x1fad19=useCallback(()=>_0x5cbd70(_0x4811b7=>_0x4811b7===_0x12b806(0x138)?_0x12b806(0x1cf):'light'),[]),_0xf742eb=useCallback(()=>_0x33dbb0(_0x27ac1a=>!_0x27ac1a),[]);return _0x8f5d73(_0x12b806(0x1d7),{'className':_0x12b806(0x1c9)+(_0x12a498===_0x12b806(0x138)?_0x12b806(0x1b3):_0x12b806(0x1cc)),'children':[_0x8f5d73(_0x12b806(0x1d7),{'className':(_0x1a8a0f?'w-80':_0x12b806(0x1d2))+'\x20transition-all\x20duration-300\x20'+(_0x12a498==='light'?_0x12b806(0x14d):_0x12b806(0x130))+_0x12b806(0x1ce),'children':[_0x8f5d73(_0x12b806(0x1d7),{'className':_0x12b806(0x1b5)+(_0x12a498==='light'?'border-gray-200':_0x12b806(0xf1)),'children':[_0x8f5d73(_0x12b806(0x152),{'onClick':_0x3e5166,'className':_0x12b806(0x151)+(_0x12a498===_0x12b806(0x138)?'hover:bg-gray-100':_0x12b806(0x13c)),'children':[_0x2f49a0(Home,{'className':_0x12b806(0x1e9)}),_0x2f49a0('span',{'children':_0x12b806(0x116)})]}),_0x8f5d73(_0x12b806(0x152),{'onClick':_0x5e2b57,'className':_0x12b806(0x1ac)+(_0x12a498==='light'?_0x12b806(0x1e4):_0x12b806(0x188)),'children':[_0x2f49a0(Plus,{'className':'w-5\x20h-5'}),_0x2f49a0(_0x12b806(0x1eb),{'children':_0x12b806(0x177)})]})]}),_0x2f49a0(_0x12b806(0x1d7),{'className':_0x12b806(0x16f),'children':_0x8f5d73(_0x12b806(0x1d7),{'className':_0x12b806(0x160),'children':[_0x2f49a0(Search,{'className':_0x12b806(0x190)}),_0x2f49a0(_0x12b806(0x1b0),{'type':'text','placeholder':_0x12b806(0x14a),'value':_0x4241a3,'onChange':_0x673082=>_0x2ebc4c(_0x673082[_0x12b806(0x184)][_0x12b806(0x102)]),'className':'w-full\x20pl-10\x20pr-4\x20py-2\x20rounded-lg\x20border\x20'+(_0x12a498===_0x12b806(0x138)?_0x12b806(0x1d9):'bg-gray-700\x20border-gray-600\x20text-white')})]})}),_0x2f49a0(_0x12b806(0x1d7),{'className':_0x12b806(0x1bf),'children':_0x10ab68[_0x12b806(0x108)](_0x1fe372=>_0x2f49a0(_0x12b806(0x1d7),{'className':_0x12b806(0x1a9)+(_0x1fe372['isActive']?_0x12a498===_0x12b806(0x138)?_0x12b806(0x141):_0x12b806(0x11f):_0x12a498===_0x12b806(0x138)?_0x12b806(0x155):_0x12b806(0x13c)),'onClick':()=>_0x5704cc(_0x1fe372['id']),'children':_0x8f5d73(_0x12b806(0x1d7),{'className':_0x12b806(0x11e),'children':[_0x8f5d73('div',{'className':'flex\x20items-center\x20gap-3\x20min-w-0\x20flex-1','children':[_0x2f49a0(MessageSquare,{'className':'w-5\x20h-5\x20flex-shrink-0'}),_0x8f5d73(_0x12b806(0x1d7),{'className':_0x12b806(0x181),'children':[_0x2f49a0('p',{'className':'font-medium\x20truncate','children':_0x1fe372[_0x12b806(0x150)]||_0x12b806(0x15a)}),_0x2f49a0('p',{'className':_0x12b806(0x145),'children':_0x1fe372[_0x12b806(0x172)]||'Kh√¥ng\x20c√≥\x20tin\x20nh·∫Øn'})]})]}),_0x8f5d73('div',{'className':_0x12b806(0xf2),'children':[_0x2f49a0('span',{'className':_0x12b806(0x1ae),'children':_0xc34923(_0x1fe372[_0x12b806(0x13e)])}),_0x2f49a0(_0x12b806(0x152),{'onClick':_0x1dc35d=>{_0x1dc35d['stopPropagation'](),_0x3e3933(_0x1fe372['id']);},'className':_0x12b806(0x1b4),'children':_0x2f49a0(Trash2,{'className':_0x12b806(0x1a8)})})]})]})},_0x1fe372['id']))}),_0x2f49a0(_0x12b806(0x1d7),{'className':_0x12b806(0x14b)+(_0x12a498===_0x12b806(0x138)?_0x12b806(0x112):_0x12b806(0xf1)),'children':_0x8f5d73(_0x12b806(0x1d7),{'className':'flex\x20items-center\x20gap-3','children':[_0x2f49a0(_0x12b806(0x1d7),{'className':_0x12b806(0x1e5)+(_0x12a498===_0x12b806(0x138)?_0x12b806(0x1e0):_0x12b806(0x11f)),'children':_0x5712cd}),_0x8f5d73(_0x12b806(0x1d7),{'className':_0x12b806(0x1be),'children':[_0x2f49a0('p',{'className':_0x12b806(0x17a),'children':_0x2554e1}),_0x2f49a0('p',{'className':_0x12b806(0x1ed),'children':_0x12b806(0x1e6)})]}),_0x8f5d73('div',{'className':_0x12b806(0x1e2),'children':[_0x2f49a0(_0x12b806(0x152),{'onClick':()=>_0x43e908('/settings'),'className':'p-2\x20rounded\x20transition-colors\x20'+(_0x12a498===_0x12b806(0x138)?_0x12b806(0x10b):_0x12b806(0x13c)),'children':_0x2f49a0(Settings,{'className':_0x12b806(0x1e9)})}),_0x2f49a0(_0x12b806(0x152),{'onClick':_0x1fad19,'className':_0x12b806(0x136)+(_0x12a498===_0x12b806(0x138)?_0x12b806(0x10b):_0x12b806(0x13c)),'children':_0x12a498===_0x12b806(0x138)?_0x2f49a0(Moon,{'className':_0x12b806(0x1e9)}):_0x2f49a0(Sun,{'className':_0x12b806(0x1e9)})})]})]})})]}),_0x8f5d73('div',{'className':_0x12b806(0x10e),'children':[_0x8f5d73(_0x12b806(0x1d7),{'className':_0x12b806(0x1b5)+(_0x12a498===_0x12b806(0x138)?'border-gray-200':_0x12b806(0xf1))+'\x20flex\x20items-center\x20justify-between','children':[_0x8f5d73('div',{'className':_0x12b806(0x13d),'children':[_0x2f49a0(_0x12b806(0x152),{'onClick':_0xf742eb,'className':_0x12b806(0x136)+(_0x12a498===_0x12b806(0x138)?_0x12b806(0x10b):_0x12b806(0x13c)),'children':_0x2f49a0(Menu,{'className':_0x12b806(0x1e9)})}),_0x2f49a0('h1',{'className':_0x12b806(0x13b),'children':_0x12b806(0x18f)})]}),_0x2f49a0(_0x12b806(0x1d7),{'className':'flex\x20items-center\x20gap-2','children':_0x598bbd?_0x8f5d73(_0x12b806(0x152),{'onClick':_0x318310,'className':_0x12b806(0x124),'children':[_0x2f49a0(StopCircle,{'className':_0x12b806(0x1e1)}),_0x2f49a0('span',{'className':_0x12b806(0xf7),'children':_0x12b806(0x1f7)})]}):_0x205236[_0x12b806(0x11a)]>0x1&&_0x8f5d73(_0x12b806(0x152),{'onClick':_0x14e480,'className':_0x12b806(0x187),'children':[_0x2f49a0(RefreshCw,{'className':_0x12b806(0x1e1)}),_0x2f49a0(_0x12b806(0x1eb),{'className':_0x12b806(0xf7),'children':_0x12b806(0x1f0)})]})})]}),_0x8f5d73(_0x12b806(0x1d7),{'className':_0x12b806(0x17d),'ref':_0x16641b,'children':[_0x205236['map'](_0x593976=>_0x2f49a0(_0x12b806(0x1d7),{'className':'flex\x20'+(_0x593976[_0x12b806(0x1bd)]===_0x12b806(0x1da)?_0x12b806(0x14f):_0x12b806(0x1a5)),'children':_0x8f5d73(_0x12b806(0x1d7),{'className':'max-w-3xl\x20p-4\x20rounded-2xl\x20relative\x20group\x20shadow-sm\x20'+(_0x593976[_0x12b806(0x1bd)]===_0x12b806(0x1da)?_0x12a498===_0x12b806(0x138)?_0x12b806(0xf3):'bg-blue-600\x20text-white':_0x12a498===_0x12b806(0x138)?_0x12b806(0x10a):_0x12b806(0x10c)),'children':[_0x8f5d73(_0x12b806(0x1d7),{'className':_0x12b806(0x137),'children':[_0x593976['role']==='ai'?_0x2f49a0(Bot,{'className':'w-5\x20h-5\x20mt-1\x20flex-shrink-0\x20text-blue-500'}):_0x2f49a0(User,{'className':_0x12b806(0x123)}),_0x8f5d73('div',{'className':_0x12b806(0x181),'children':[_0x2f49a0('p',{'className':'font-medium\x20text-sm\x20mb-1','children':_0x593976['role']===_0x12b806(0x1da)?_0x2554e1:'Hein\x20AI'}),_0x2f49a0('div',{'className':'whitespace-pre-wrap\x20break-words\x20prose\x20prose-sm\x20max-w-none\x20dark:prose-invert','children':typeof _0x242601(_0x593976[_0x12b806(0x127)],_0x593976[_0x12b806(0x1bd)])===_0x12b806(0x134)?_0x2f49a0(_0x12b806(0x1eb),{'dangerouslySetInnerHTML':{'__html':_0x258fac[_0x12b806(0x1db)](_0x242601(_0x593976[_0x12b806(0x127)],_0x593976[_0x12b806(0x1bd)]),{'ADD_TAGS':['img',_0x12b806(0x152),_0x12b806(0x1d7),_0x12b806(0x1fc),_0x12b806(0x199)],'ADD_ATTR':['src',_0x12b806(0x171),_0x12b806(0xf0),_0x12b806(0x15d),_0x12b806(0x185)]})}}):_0x242601(_0x593976[_0x12b806(0x127)],_0x593976['role'])}),_0x2f49a0('p',{'className':_0x12b806(0x1fb),'children':_0xc34923(_0x593976[_0x12b806(0x13e)])})]})]}),_0x593976['id']&&!_0x593976['id'][_0x12b806(0x129)](_0x12b806(0x17c))&&!_0x593976['id'][_0x12b806(0x129)](_0x12b806(0x1b8))&&!_0x593976['id'][_0x12b806(0x129)]('deleted')&&_0x2f49a0('button',{'onClick':()=>_0x590b82(_0x593976['id']),'className':_0x12b806(0x1d1),'title':_0x12b806(0x19d),'children':_0x2f49a0(Trash2,{'className':_0x12b806(0x1a8)})})]})},_0x593976['id'])),_0x598bbd&&_0x2f49a0('div',{'className':_0x12b806(0x1c1),'children':_0x2f49a0(_0x12b806(0x1d7),{'className':_0x12b806(0x10f)+(_0x12a498===_0x12b806(0x138)?_0x12b806(0xeb):_0x12b806(0x1af)),'children':_0x8f5d73(_0x12b806(0x1d7),{'className':_0x12b806(0x13d),'children':[_0x2f49a0(Bot,{'className':_0x12b806(0x1ab)}),_0x8f5d73(_0x12b806(0x1d7),{'className':_0x12b806(0x1bb),'children':[_0x2f49a0(Loader2,{'className':'w-5\x20h-5\x20animate-spin'}),_0x2f49a0(_0x12b806(0x1eb),{'children':_0x12b806(0x16c)})]})]})})}),_0x2f49a0(_0x12b806(0x1d7),{'ref':_0x5d6ca2})]}),_0x2f49a0(_0x12b806(0x1d7),{'className':_0x12b806(0x12f)+(_0x12a498==='light'?'border-gray-200\x20bg-white':_0x12b806(0x1fe)),'children':_0x8f5d73(_0x12b806(0x1d7),{'className':'max-w-4xl\x20mx-auto','children':[_0x8f5d73(_0x12b806(0x1d7),{'className':_0x12b806(0x160),'children':[_0x2f49a0(_0x12b806(0x153),{'ref':_0xbf2eec,'value':_0x3d95fc,'onChange':_0x286a6d=>_0x1dc9df(_0x286a6d['target'][_0x12b806(0x102)]),'onKeyDown':_0x4406f3,'placeholder':_0x12b806(0x194),'className':_0x12b806(0x197)+(_0x12a498===_0x12b806(0x138)?_0x12b806(0x1a3):'bg-gray-700\x20border-gray-600\x20text-white\x20placeholder-gray-400')+'\x20shadow-sm\x20focus:ring-blue-500\x20min-h-[3rem]\x20max-h-48','disabled':_0x598bbd,'rows':0x1,'style':{'height':_0x12b806(0x1df),'minHeight':'3rem'},'onInput':_0x452ac1=>{const _0x130aeb=_0x12b806;_0x452ac1[_0x130aeb(0x184)][_0x130aeb(0x1a1)][_0x130aeb(0x192)]=_0x130aeb(0x1df),_0x452ac1[_0x130aeb(0x184)][_0x130aeb(0x1a1)][_0x130aeb(0x192)]=Math[_0x130aeb(0x1aa)](_0x452ac1['target'][_0x130aeb(0x168)],0xc0)+'px';}}),!_0x598bbd&&_0x3d95fc['trim']()&&_0x8f5d73(_0x12b806(0x1d7),{'className':'absolute\x20right-24\x20top-3\x20flex\x20gap-1','children':[_0x2f49a0('button',{'onClick':_0x807452,'className':_0x12b806(0x144)+(_0x12a498===_0x12b806(0x138)?_0x12b806(0x198):_0x12b806(0x15c))+_0x12b806(0x1c0),'title':'Bold\x20(Ctrl+B)','children':_0x2f49a0(Bold,{'className':_0x12b806(0x125)})}),_0x2f49a0(_0x12b806(0x152),{'onClick':_0x23b4a5,'className':_0x12b806(0x144)+(_0x12a498===_0x12b806(0x138)?_0x12b806(0x198):_0x12b806(0x15c))+_0x12b806(0x1c0),'title':_0x12b806(0x178),'children':_0x2f49a0(Italic,{'className':_0x12b806(0x125)})}),_0x2f49a0('button',{'onClick':_0x419fa5,'className':_0x12b806(0x144)+(_0x12a498==='light'?'hover:bg-gray-200\x20text-gray-700':_0x12b806(0x15c))+_0x12b806(0x1c0),'title':_0x12b806(0x1d0),'children':_0x2f49a0(Code,{'className':_0x12b806(0x125)})})]}),_0x8f5d73('div',{'className':_0x12b806(0x110),'ref':_0xa16db7,'children':[!_0x598bbd&&_0x3d95fc[_0x12b806(0x1d5)]()&&_0x8f5d73('div',{'className':_0x12b806(0x160),'children':[_0x2f49a0(_0x12b806(0x152),{'onClick':()=>_0x34b7f3(!_0x58521b),'className':_0x12b806(0x11b)+(_0x12a498==='light'?_0x12b806(0x198):'hover:bg-gray-600\x20text-gray-300'),'title':'Th√™m\x20t√πy\x20ch·ªçn','children':_0x2f49a0(ChevronDown,{'className':_0x12b806(0x1e1)})}),_0x58521b&&_0x8f5d73(_0x12b806(0x1d7),{'className':_0x12b806(0x179)+(_0x12a498===_0x12b806(0x138)?_0x12b806(0x1a0):_0x12b806(0x18e))+'\x20rounded-lg\x20shadow-lg\x20border\x20py-2\x20z-10','children':[_0x8f5d73('button',{'onClick':_0x3004d,'disabled':_0x598bbd||!_0x3d95fc['trim'](),'className':_0x12b806(0x1a4)+(_0x12a498===_0x12b806(0x138)?'hover:bg-gray-100\x20text-gray-900':_0x12b806(0x107))+'\x20'+(_0x598bbd||!_0x3d95fc[_0x12b806(0x1d5)]()?_0x12b806(0x142):'')+_0x12b806(0x1c0),'children':[_0x2f49a0(Globe,{'className':_0x12b806(0x1e1)}),_0x12b806(0x1dc)]}),_0x8f5d73(_0x12b806(0x152),{'onClick':_0x5eb933,'disabled':_0x598bbd||!_0x3d95fc[_0x12b806(0x1d5)](),'className':_0x12b806(0x1a4)+(_0x12a498==='light'?_0x12b806(0x1f1):_0x12b806(0x107))+'\x20'+(_0x598bbd||!_0x3d95fc['trim']()?_0x12b806(0x142):'')+_0x12b806(0x1c0),'children':[_0x2f49a0(Image,{'className':_0x12b806(0x1e1)}),'T·∫°o\x20·∫£nh']})]})]}),_0x2f49a0(_0x12b806(0x152),{'onClick':_0x8b2dec,'disabled':_0x598bbd||!_0x3d95fc['trim'](),'className':_0x12b806(0x12c)+(_0x12a498===_0x12b806(0x138)?_0x12b806(0x143):_0x12b806(0x1ee))+_0x12b806(0x1f2)+(_0x598bbd||!_0x3d95fc[_0x12b806(0x1d5)]()?_0x12b806(0x165):'hover:scale-105'),'title':_0x12b806(0x1dd),'children':_0x598bbd?_0x2f49a0(Loader2,{'className':_0x12b806(0x19b)}):_0x2f49a0(Send,{'className':'w-5\x20h-5'})})]})]}),_0x8f5d73(_0x12b806(0x1d7),{'className':_0x12b806(0x18c),'children':[_0x2f49a0(_0x12b806(0x1eb),{'children':_0x12b806(0x14e)}),_0x2f49a0(_0x12b806(0x1eb),{'children':'Ctrl+B/I/`\x20ƒë·ªÉ\x20ƒë·ªãnh\x20d·∫°ng'})]})]})})]})]});}